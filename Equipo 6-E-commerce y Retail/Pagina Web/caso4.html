<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Caso 4 ‚Äî Errores en sistemas de pago</title>
  <link rel="stylesheet" href="css/caso1.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">ET</div>
        <div>
          <h1>Errores Tecnol√≥gicos</h1>
          <p class="lead">Casos reales de fallas en plataformas digitales</p>
        </div>
      </div>
     
    </header>

    <section class="caso">
      <div class="resumen">
        <h1>Caso 4 ‚Äî Errores en sistemas de pago</h1>
        <ul>
          <li><strong>Empresa:</strong> PayPal / Stripe / MercadoPago</li>
          <li><strong>Fecha:</strong> 15 de febrero de 2024</li>
          <li><strong>Tipo de fallo:</strong> Cobros duplicados / Fallo en API</li>
          <li><strong>Severidad:</strong> Cr√≠tica üö®</li>
        </ul>
      </div>

      <div class="accordion">
        <button class="accordion-btn">Resumen Ejecutivo</button>
        <div class="panel">
          <p>Durante las primeras horas del 15 de febrero de 2024, m√∫ltiples plataformas de pago digital reportaron errores de procesamiento que causaron cobros duplicados a miles de usuarios. El problema afect√≥ transacciones en PayPal, Stripe y MercadoPago, provocando reclamos masivos.</p>
        </div>

        <button class="accordion-btn">Causa principal</button>
        <div class="panel">
          <p>La causa ra√≠z fue una actualizaci√≥n simult√°nea de los m√≥dulos de conciliaci√≥n de pagos en varios proveedores que usaban una API compartida. Un error en la gesti√≥n de idempotencia permiti√≥ que las solicitudes de pago se procesaran m√°s de una vez cuando los servidores respond√≠an con lentitud.</p>
          <blockquote>‚ÄúLas solicitudes duplicadas fueron tratadas como nuevas transacciones en lugar de ignorarse, violando la regla de idempotencia del sistema.‚Äù ‚Äî Reporte t√©cnico de Stripe</blockquote>
        </div>

        <button class="accordion-btn">Impacto</button>
        <div class="panel">
          <ul>
            <li>Miles de usuarios recibieron cobros duplicados o triples.</li>
            <li>P√©rdidas econ√≥micas y devoluciones autom√°ticas estimadas en 2.5 millones USD.</li>
            <li>Ca√≠da de confianza en los sistemas de pago afectados.</li>
            <li>Retrasos de hasta 48 horas en conciliaciones bancarias.</li>
          </ul>

          <div class="timeline">
            <p><strong>Timeline del incidente:</strong></p>
            <ul>
              <li>üí≥ 01:00 ‚Äî Inicio del despliegue de actualizaci√≥n en servidores de pago.</li>
              <li>üí• 02:15 ‚Äî Primeros reportes de cobros duplicados en redes sociales.</li>
              <li>üß© 03:40 ‚Äî Equipos t√©cnicos detectan inconsistencia en respuestas HTTP.</li>
              <li>üïì 04:20 ‚Äî Se detiene la propagaci√≥n de la versi√≥n defectuosa.</li>
              <li>üïó 07:00 ‚Äî Implementaci√≥n de rollback y reversi√≥n de pagos duplicados.</li>
            </ul>
          </div>
        </div>

        <button class="accordion-btn">An√°lisis t√©cnico</button>
        <div class="panel">
          <p>El an√°lisis t√©cnico demostr√≥ que el problema se debi√≥ a la ausencia de un control robusto de idempotencia en la API de pagos. Cada solicitud deb√≠a incluir un identificador √∫nico (<code>idempotency_key</code>), pero al no validarse correctamente, las transacciones se ejecutaron m√∫ltiples veces.</p>

          <pre><code># Ejemplo de validaci√≥n incorrecta en la API
if not payment_exists(request.idempotency_key):
    process_payment(request)
else:
    process_payment(request)  # Error: no se bloquea la transacci√≥n duplicada
          </code></pre>

          <p>Adem√°s, los logs del sistema mostraron que las respuestas HTTP 500 (error interno del servidor) fueron tratadas como fallos temporales, lo que provoc√≥ reintentos autom√°ticos sin verificaci√≥n de duplicidad.</p>
        </div>

        <button class="accordion-btn">Lecciones aprendidas</button>
        <div class="panel">
          <ul>
            <li>Implementar validaciones estrictas de idempotencia en todas las APIs de pago.</li>
            <li>Dise√±ar sistemas de reintento que validen el estado de las transacciones previas.</li>
            <li>Monitorear m√©tricas de error en tiempo real para detectar anomal√≠as.</li>
            <li>Coordinar despliegues globales de manera escalonada para evitar conflictos simult√°neos.</li>
          </ul>
        </div>

        <button class="accordion-btn">Conclusiones</button>
        <div class="panel">
          <p>El caso evidencia c√≥mo un peque√±o error en la gesti√≥n de solicitudes puede desencadenar p√©rdidas financieras y da√±os reputacionales a nivel global. Las empresas de pago deben priorizar la integridad transaccional y adoptar arquitecturas resilientes que eviten repeticiones en los procesos cr√≠ticos.</p>
        </div>
      </div>

      <a href="index.html" class="volver">‚Üê Volver al inicio</a>
    </section>

    <footer>
      Proyecto acad√©mico ¬∑ Equipo 6 ‚Äî E-commerce y Tecnolog√≠a ¬∑ √öltima actualizaci√≥n: 31 Oct 2025
    </footer>
  </div>

  <script>
    const buttons = document.querySelectorAll(".accordion-btn");
    buttons.forEach(btn => {
      btn.addEventListener("click", function () {
        const panel = this.nextElementSibling;
        this.classList.toggle("active");
        if (panel.style.maxHeight) {
          panel.style.maxHeight = null;
        } else {
          panel.style.maxHeight = panel.scrollHeight + "px";
        }
      });
    });
  </script>
</body>
</html>
